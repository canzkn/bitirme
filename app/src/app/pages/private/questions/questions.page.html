<ion-header>
  <ion-toolbar color="dark">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>
      <app-logo></app-logo>
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="content">
    <!-- header -->
    <ion-grid class="total-question-bar">
      <ion-row>
        <ion-col size="6">
          <!-- title -->
          <h3>Tüm Sorular</h3>
          <!--#title -->
        </ion-col>
        <ion-col class="ion-align-self-center">
          <div class="ion-text-end" style="margin-right:8px">
            <ion-button color="primary" size="small" routerLink="/board/ask-question">Bir Soru Sor</ion-button>
            <ion-button color="medium" size="small" (click)="showFilter()">Filtrele</ion-button>
          </div>
        </ion-col>
      </ion-row>
      <ion-row class="filter-area" *ngIf="isShowFilter">
        <ion-col size="12" size-md>
          <div class="ion-text-center"><b>Durum</b></div>
          <div class="filter-items">
            <div class="filter-item">
              <div class="filter-item-checkbox"><ion-checkbox mode="md" [(ngModel)] = "postData.filter.unanswered"></ion-checkbox></div>
              <div class="filter-item-text">Cevaplanmayanlar</div>
            </div>
            <div class="filter-item">
              <div class="filter-item-checkbox"><ion-checkbox mode="md" [(ngModel)] = "postData.filter.acceptedanswer"></ion-checkbox></div>
              <div class="filter-item-text">Kabul edilmemiş cevaplar</div>
            </div>
          </div>
        </ion-col>
        <ion-col size="12" size-md>
          <div class="ion-text-center"><b>Sırala</b></div>
          <div class="filter-items">
            <div class="filter-item" *ngFor="let filterItem of filterItems; let i = index">
              <div class="filter-item-checkbox"><ion-checkbox mode="md" [ngModel]="postData.filter.sortCheck == i" (ngModelChange)="$event ? postData.filter.sortCheck = i : postData.filter.sortCheck = -1"></ion-checkbox></div>
              <div class="filter-item-text">{{filterItem.display}}</div>
            </div>
          </div>
        </ion-col>
        <ion-col size="12" size-md>
          <div class="ion-text-center"><b>Takip Edilen</b></div>
          <div class="filter-items">
            <div class="filter-item" *ngFor="let followItem of followItems; let i = index">
              <div class="filter-item-checkbox"><ion-checkbox mode="md" [ngModel]="postData.filter.followCheck == i" (ngModelChange)="$event ? postData.filter.followCheck = i : postData.filter.followCheck = -1"></ion-checkbox></div>
              <div class="filter-item-text">{{followItem.display}}</div>
            </div>
            <div class="filter-item">
              <tag-input  [(ngModel)]="postData.filter.tags" 
                          [placeholder]="'yeni bir etiket girin'"
                          [secondaryPlaceholder]="'örneğin: javascript'"
                          [onlyFromAutocomplete]="true"
                          theme='foundation-theme'>
                  <tag-input-dropdown [showDropdownIfEmpty]="false" 
                                      [(autocompleteItems)]='autocompleteFields'>
                  </tag-input-dropdown>
              </tag-input>
            </div>
          </div>
        </ion-col>
        <ion-col size="12">
          <div class="ion-text-end">
            <ion-button color="dark" size="small" (click)="applyFilter()">Filtreyi Uygula</ion-button>
          </div>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="7">
          <p>Toplam <b>{{ totalData }}</b> adet soru</p>
        </ion-col>
        <ion-col class="ion-align-self-center">
          <div class="ion-text-end" style="margin-right:8px">
            <ion-segment mode="ios" style="margin-right:15px;margin-bottom:10px;" value="{{postData.type}}" (ionChange)="segmentChanged($event)">
              <ion-segment-button value="new">
                <ion-label>Yeni</ion-label>
              </ion-segment-button>
              <ion-segment-button value="active">
                <ion-label>Aktif</ion-label>
              </ion-segment-button>
              <ion-segment-button value="notanswer">
                <ion-label>Cevaplanmamışlar</ion-label>
              </ion-segment-button>
            </ion-segment>
          </div>
        </ion-col>
      </ion-row>
    </ion-grid>
    <!--#header -->

    <!-- questions -->
    <ion-list lines="full">
      <!-- question -->
      <ion-item *ngFor="let question of questions" routerLink="/board/show-question/{{question.QuestionID}}">
        <div class="question">
          <div class="question-mobile">
            <div class="reputation-bar-mobile votes">
              <div class="mini-counts"><span>{{ question.Reputation }}</span> oy</div>
            </div>
            <div class="reputation-bar-mobile answers" *ngIf="question.AnswerCount == 0">
              <div class="mini-counts"><span>{{ question.AnswerCount }}</span> cevap</div>
            </div>
            <div class="reputation-bar-mobile answers answered" *ngIf="question.AnswerCount > 0 && question.Status == 0">
              <div class="mini-counts"><span>{{ question.AnswerCount }}</span> cevap</div>
            </div>
            <div class="reputation-bar-mobile answers solved" *ngIf="question.AnswerCount > 0 && question.Status > 0">
              <div class="mini-counts"><span>{{ question.AnswerCount }}</span> cevap</div>
            </div>
            <div class="reputation-bar-mobile views">
              <div class="mini-counts"><span>{{ question.View }}</span> görüntüleme</div>
            </div>
          </div>
          <div class="question-left col-md-6">
            <div class="row1">
              <div class="reputation-bar votes">
                <div class="mini-counts"><span>{{ question.Reputation }}</span></div>
                <div>oy</div>
              </div>
              <div class="reputation-bar answers" *ngIf="question.AnswerCount == 0">
                <div class="mini-counts"><span>{{ question.AnswerCount }}</span></div>
                <div>cevap</div>
              </div>
              <div class="reputation-bar answers answered" *ngIf="question.AnswerCount > 0 && question.Status == 0">
                <div class="mini-counts"><span>{{ question.AnswerCount }}</span></div>
                <div>cevap</div>
              </div>
              <div class="reputation-bar answers solved" *ngIf="question.AnswerCount > 0 && question.Status > 0">
                <div class="mini-counts"><span>{{ question.AnswerCount }}</span></div>
                <div>cevap</div>
              </div>
            </div>
            <div class="row2">
              <div class="reputation-bar views">
                <div class="mini-counts"><span>{{ question.View }}</span></div>
                <div>görüntüleme</div>
              </div>
            </div>
          </div>
          <div class="question-right col-md-6">
            <ion-text color="primary" style="cursor:pointer">
              <h5>{{ question.Title }}</h5>
            </ion-text>
            <p style="font-size:11px">
              {{ question.Content }}...
            </p>
            <div class="question-tags">
              <ion-chip color="primary" *ngFor="let tag of question.Tags">
                <ion-label>{{ tag.TagName }}</ion-label>
              </ion-chip>
            </div>
            <div class="question-asked-by">
              <ion-text color="danger">{{ question.Username }}</ion-text> tarafından <ion-text color="medium">{{ question.PostDate }}</ion-text> {{ question.PostType }}.
            </div>
          </div>
        </div>
      </ion-item>
      <!--#question -->
    </ion-list>
    <!--#questions -->

    <ion-infinite-scroll threshold="25%" (ionInfinite)="loadMore($event)">
      <ion-infinite-scroll-content
        loadingSpinner="bubbles"
        loadingText="Yükleniyor...">
      </ion-infinite-scroll-content>
    </ion-infinite-scroll>
  </div>

</ion-content>